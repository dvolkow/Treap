# Тестируем курево!

## Описание тестов

Все тесты запускаются как ```bash```-скрипты.  Во всех тестах 2 и 3 необязательные параметры:

```OPERATION_COUNT``` -- количество генерящихся операций с деревом

```RANGE``` -- размах генерящихся ключей, в среднем равномерно почти в пределах [ -```RANGE```/ 2 ; +```RANGE```/ 2 ]

По умолчанию равны 42.

## ```runtest```

Сравниваем с наивной реализацией, да ещё и на Java! ^)

Запуск теста:

```$ ./runtest.sh COUNT_TESTS [OPERATION_COUNT] [RANGE] ```

где ```COUNT_TESTS``` -- число случайных тестов, которым будет подвергнуто дерево.

```SimpleTree.java``` -- реализация самого обычного, простого бинарного дерева поиска, никак не сбалансированного. Про нее известно, что она корректна с точностью до выброса исключений, поэтому при их возникновении сравнения вывода этой программы (output_java.txt) и тестируемого ```output.txt``` не произойдет.

```gentest.cpp``` - генератор случайных тестов с возможностью менять количество генерируемых тестов, и их некоторые характеристики.

Скрипт ```runtest.sh``` собирает все необходимые процедуры, запускает по очереди генератор, ```treap``` и ```SimpleTree``` (java) в цикле указанное число раз, и удаляет после себя скомпилированные классы java и бинарник от ```gentest.cpp```.


## ```set_vs_treap```

Сравниваем с ```std::set``` по скорости и корректности работы.

Запуск теста:

``` $ ./set_vs_treap COUNT_TESTS [OPERATION_COUNT] [RANGE] ```

## ```complex_test.sh```

Гибрид двух предыдущих тестов. Сравниваем все три выхода между собой.

Запуск теста:

``` $ ./complex_test.sh COUNT_TESTS [OPERATION_COUNT] [RANGE] ```

## RE_test.sh

Тест, направленный на возникновение runtime-ошибоки, например, падение из-за проблем с аллокатором памяти. Из-за потребности в большом входе для многих таких тестов в этом случае сборка происходит таким образом, что тестовые наборе генерируются в самом ```test_header.cpp```, не требуя файлового ввода-вывода.


Запуск теста:

``` $ ./RE_test.sh COUNT_TESTS [OPERATION_COUNT] [RANGE] ```

_____________________________________________________________________________________________

Также прилагается тест ```k_max_test.sh```, запускающийся аналогично, для тестирования функции k_max дерева. Файл ```K_MAX_SOLUTION.cpp``` являестся решением одной из задач Яндекс-контеста с использованием treap данной реализации (проходило все тесты на сервере).
